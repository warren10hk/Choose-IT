{% extends 'base.html' %}
{% load bootstrap4 %}
{% block content %}

    <form method = "POST" enctype = "mutipart/form-data">
    <div class = "row">
    <div class = "jumbotron col-sm-12" style = "text-align:center">
        <p>We wish to learn more about your <b>current phone</b>, please provide us with</p>
        <h4>Brand</h4>
            <select class = "form-control drop" id = "drop">
             <option value = "default" selected = "true" disabled>Select Options ...</option>
              {% for model in modellist %}
                  <option value = '{{ model }}'>{{ model }}</option>
              {% endfor %}
            </select>
            <br><br>
        <div class = "collapse" id = "mlist">
            <h4>Phone Model</h4>
            <select class = "form-control" id = "model">
                <option value = "default" selected = "true" disabled>Select Options ...</option>
            </select>
        </div>
        
        </div>
    </div>
    <div class = "collapse" id = "cri">
        <div class = "row col-sm-12">
            <!-- <div class="card col-sm-6">
                <img class = "card-img" src = "https://cellphoneunlock.net/wp-content/uploads/2015/07/sizes-matters.png" alt="Card image">
                <div class = "card-text">
                    <h5>Screen Size</h5>
                </div>
            </div> -->
            <div class="card text-white bg-info col-sm-4" style="max-height: 30rem;">
                <div class="card-header">Screen Size</div>
                <div class="card-body">
                  <h5 class="card-title">Your current screen size is : <p id = "size"></p>Do you want the screen size to be</h5>
                  <p class="card-text"> 
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="screen" id="screen1" value=">" checked>
                        <label class="form-check-label" for="screen1">
                          (>) bigger than 
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="screen" id="screen2" value="<" checked>
                        <label class="form-check-label" for="screen2">
                          (<) less than 
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="screen" id="screen3" value="~" checked>
                        <label class="form-check-label" for="screen3">
                          (~) about the same as
                        </label>
                    </div>
                    current  
                    </p>
                </div>
            </div>
            <div class="card bg-light col-sm-4">
                <div class="card-header">Header</div>
                <div class="card-body">
                  <h5 class="card-title">Info card title</h5>
                  <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
            </div>
            <div class="card text-white bg-danger col-sm-4">
                 <div class="card-header">Header</div>
                <div class="card-body">
                <h5 class="card-title">Info card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
                </div>
        </div>  
        <br>
        <input type = "submit" value = "Find my phone!" name = "find" id = "find" class = "btn  btn-dark">

    </div>
  
    </form>
    <script>
        
        $("#drop").on("change", function(){
            var brand = $(this).val();

            // get model of selected brand
            $.ajax({
                url: '/ajax/getmodel/',
                data: {
                    "brand" : brand
                },
                dataType: 'json',
                success: function(data){
                    console.log("received data and printing it out like\n");
                    console.log(data);
                    var result = JSON.parse(data);
                    // console.log(result[1].fields.Model);
                    result.forEach(function(opt){
                        console.log(opt.fields.Model);
                        var tempopt = document.createElement("option");
                        tempopt.value = opt.pk;
                        tempopt.innerHTML = opt.fields.Model;
                        $("#model").append(tempopt);
                    })
                    $("#mlist").collapse();
                }
            });

        });

        $("#model").on("change", function(){
            var pk = $(this).val();
            console.log(pk);
            // optional showing user the current info
            var brand = "Apple";
            $.ajax({
                url: '/ajax/getmcontent',
                data: {
                    "pk" : pk
                },
                dataType: 'json',
                success: function(data){
                    console.log("received data and printing it out like\n");
                    console.log(data);
                    var result = JSON.parse(data);
                    console.log(result[0].fields.Screen_size);
                    document.getElementById("size").innerHTML = result[0].fields.Screen_size;
    
                }
            });

            $("#cri").collapse();
        
        })
    </script>
    </form>
    


{% endblock %}